<h1>Домашнее задание к занятию «Микросервисы: подходы»</h1>

____

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

<h3>Задача 1: Обеспечить разработку</h3>

____

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

 - облачная система;
 - система контроля версий Git;
 - репозиторий на каждый сервис;
 - запуск сборки по событию из системы контроля версий;
 - запуск сборки по кнопке с указанием параметров;
 - возможность привязать настройки к каждой сборке;
 - возможность создания шаблонов для различных конфигураций сборок;
 - возможность безопасного хранения секретных данных (пароли, ключи доступа);
 - несколько конфигураций для сборки из одного репозитория;
 - кастомные шаги при сборке;
 - собственные докер-образы для сборки проектов;
 - возможность развернуть агентов сборки на собственных серверах;
 - возможность параллельного запуска нескольких сборок;
 - возможность параллельного запуска тестов.

Обоснуйте свой выбор.

<h3>Задача 2: Логи </h3>

____

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

 - сбор логов в центральное хранилище со всех хостов, обслуживающих систему;
 - минимальные требования к приложениям, сбор логов из stdout;
 - гарантированная доставка логов до центрального хранилища;
 - обеспечение поиска и фильтрации по записям логов;
 - обеспечение пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов;
 - возможность дать ссылку на сохранённый поиск по записям логов.

Обоснуйте свой выбор.

<h3>Задача 3: Мониторинг</h3>

____


Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

Решение должно соответствовать следующим требованиям:

 - сбор метрик со всех хостов, обслуживающих систему;
 - сбор метрик состояния ресурсов хостов: CPU, RAM, HDD, Network;
 - сбор метрик потребляемых ресурсов для каждого сервиса: CPU, RAM, HDD, Network;
 - сбор метрик, специфичных для каждого сервиса;
 - пользовательский интерфейс с возможностью делать запросы и агрегировать информацию;
 - пользовательский интерфейс с возможностью настраивать различные панели для отслеживания состояния системы.

Обоснуйте свой выбор.




____

<h1>Решение</h1>

____

<h3>Задача 1: Обеспечить разработку</h3>


Выбор таких инструментов - GitHub, Jenkins, Docker Hub, AWS CodeBuild и AWS Secrets Manager.

 - Интеграция систем контроля версий и непрерывной интеграции: GitHub обеспечивает широкие возможности для управления кодовой базой, а Jenkins предоставляет гибкие средства для автоматизации процесса непрерывной интеграции.

 - Управление собственными докер-образами: Docker Hub позволяет легко создавать и хранить собственные докер-образы, что облегчает процесс сборки и развертывания проектов.

 - Облачная среда для сборки и развертывания: AWS CodeBuild предоставляет возможность развертывания агентов сборки на собственных серверах и параллельного запуска нескольких сборок, что обеспечивает гибкость и масштабируемость.

 - Безопасное хранение секретных данных: AWS Secrets Manager обеспечивает безопасное хранение и управление секретными данными, такими как пароли и ключи доступа, что обеспечивает высокий уровень безопасности процесса разработки.

 - Гибкость и настраиваемость: Все выбранные инструменты обладают высокой гибкостью и настраиваемостью, что позволяет адаптировать их под специфические потребности проекта.

Этот набор инструментов позволяет легко автоматизировать процесс разработки, тестирования и развертывания приложений, обеспечивая высокий уровень гибкости, масштабируемости и безопасности. Комбинация облачных и собственных инструментов позволяет эффективно управлять проектами любого масштаба, обеспечивая высокую производительность.



____

<h3>Задача 2: Логи </h3>


Для обеспечения сбора и анализа логов в микросервисной архитектуре рекомендуется использовать следующее решение:

 - Elasticsearch: В качестве центрального хранилища для сбора и хранения логов. Elasticsearch обеспечивает гибкость и масштабируемость для хранения и поиска больших объемов данных.

 - Kibana: Для создания пользовательского интерфейса с возможностью предоставления доступа разработчикам для поиска по записям логов. Kibana предоставляет гибкий и интуитивно понятный интерфейс для анализа и визуализации данных, хранящихся в Elasticsearch.

 - Logstash: Для обеспечения гарантированной доставки логов до центрального хранилища. Logstash предоставляет мощные инструменты для обработки и фильтрации логов перед отправкой их в Elasticsearch.

 - Beats: Beats - набор легких агентов данных, которые отправляют данные с хостов в Elasticsearch или Logstash. Это обеспечивает минимальные требования к приложениям, так как Beats могут собирать данные из различных источников, включая stdout.

Это решение обеспечивает полный жизненный цикл сбора, хранения и анализа логов. Elasticsearch обеспечивает эффективное хранение и поиск логов, Filebeat и Beats обеспечивают надежный сбор данных, Logstash обеспечивает фильтрацию и обработку логов, а Kibana предоставляет удобный интерфейс для визуализации и анализа данных. Вместе эти инструменты обеспечивают мощный и гибкий инструментарий для анализа логов в микросервисной архитектуре.


____

<h3>Задача 3: Мониторинг</h3>


Для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре рекомендуется использовать следующее решение:

 - Prometheus: Для сбора метрик со всех хостов, обслуживающих систему, а также для сбора метрик состояния ресурсов хостов и потребляемых ресурсов для каждого сервиса. Prometheus обеспечивает гибкость и масштабируемость для сбора и хранения метрик, а также предоставляет мощные средства агрегации данных.

 - Grafana: Для создания пользовательского интерфейса с возможностью запросов и агрегирования информации, а также настройки различных панелей для отслеживания состояния системы. Grafana предоставляет гибкие возможности визуализации данных и создания дашбордов для мониторинга различных метрик.

 - Node Exporter/Prometheus Exporters: Для сбора метрик, специфичных для каждого сервиса. Экспортеры Prometheus позволяют собирать метрики из различных источников, включая специфические метрики для отдельных сервисов.

 - Alertmanager: Для управления оповещениями и уведомлениями о событиях, требующих внимания, на основе собранных метрик. Alertmanager интегрируется с Prometheus и позволяет настраивать правила оповещений.

Это решение обеспечивает полный набор инструментов для мониторинга состояния хостов и сервисов в микросервисной архитектуре. Prometheus обеспечивает эффективный сбор и хранение метрик, Grafana предоставляет гибкие возможности визуализации данных, а Alertmanager позволяет эффективно управлять оповещениями. Экспортеры Prometheus обеспечивают сбор специфических метрик для каждого сервиса, обеспечивая полное покрытие для мониторинга состояния системы.